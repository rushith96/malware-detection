import io
import os
import numpy as np
import streamlit as st
import requests
from PIL import Image
from model import classify
import cv2
@st.cache(allow_output_mutation=True)
def predict():
    c=classify('')
    st.markdown('#### Predicted Captions:')
    st.write(c)
st.title('Malware Detect')
st.markdown('### What we do?')
st.write('We will scan the .exe files and determine whether the file has malware or not')
hide_streamlit_style = """
            <style>
            #MainMenu {visibility: hidden;}
            footer {visibility: hidden;}
            </style>
            """
st.markdown(hide_streamlit_style, unsafe_allow_html=True)
exe_upload = st.file_uploader(label='Upload .exe File', type='exe')
if exe_upload is not None:
    # Process the uploaded .exe file
    file_contents = exe_upload.read()
    st.write(f"File uploaded: {exe_upload.name}")
    st.write(f"File size: {len(file_contents)} bytes")
    a=classify(io.BytesIO(file_contents))
    st.write("### Malware detection result:", a)